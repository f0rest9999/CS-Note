# 计算机网络

## 概述

####网络的网络

- 网络把主机连接起来，而互连网（internet）是把多种不同的网络连接起来，因此互连网是网络的网络。而互联网（Internet）是全球范围的互连网。

![image-20201230202450005](https://gitee.com/f0rest9999/images/raw/master/20201230202450.png)

#### ISP

- **互联网服务提供商**可以从互联网管理机构获得许多 IP 地址，同时拥有通信线路以及路由器等联网设备，个人或机构向 ISP 缴纳一定的费用就可以接入互联网。

- 目前的互联网是一种多层次 ISP 结构，ISP 根据覆盖面积的大小分为第一层 ISP、区域 ISP 和接入 ISP。互联网交换点 IXP 允许两个 ISP 直接相连而不用经过第三个 ISP。
- ![image-20201230210407375](https://gitee.com/f0rest9999/images/raw/master/20201230210407.png)

#### 主机间通信方式

- 客户-服务器（C/S）：客户是服务的请求方，服务器是服务的提供方。

  ![image-20201230210423165](https://gitee.com/f0rest9999/images/raw/master/20201230210423.png)

- 对等（P2P）：不区分客户和服务器。

  ![image-20201230210435342](https://gitee.com/f0rest9999/images/raw/master/20201230210435.png)

#### 电路交换与分组交换

- **电路交换**：电路交换用于电话通信系统，两个用户要通信之前需要建立一条专用的物理链路，==并且在整个通信过程中始终占用该链路==。由于通信的过程中不可能一直在使用传输线路，因此==电路交换对线路的利用率很低==，往往不到 10%。

- **分组交换**：每个分组都有首部和尾部，包含了源地址和目的地址等控制信息，在==同一个传输线路上==同时传输==多个分组====互相不会影响==，因此在同一条传输线路上允许同时传输多个分组，也就是说分组交换不需要占用传输线路。

  在一个邮局通信系统中，邮局收到一份邮件之后，先存储下来，然后把相同目的地的邮件一起转发到下一个目的地，这个过程就是==存储转发==过程，分组交换也使用了==存储转发==过程。

#### 时延

- **总时延 = 排队时延 + 处理时延 + 传输时延 + 传播时延**
- ![image-20201230211549345](https://gitee.com/f0rest9999/images/raw/master/20201230211549.png)

- **排队时延**：分组在路由器的输入队列和输出队列中排队等待的时间，取决于网络当前的通信量。

- **处理时延**：主机或路由器收到分组时进行处理所需要的时间，例如分析首部、从分组中提取数据、进行差错检验或查找适当的路由等。

- **传输时延**：主机或路由器传输数据帧所需要的时间。其中 l 表示数据帧的长度，v 表示传输速率。

  ![`](https://gitee.com/f0rest9999/images/raw/master/20201230205232.png)

- **传播时延**：电磁波在信道中传播所需要花费的时间，电磁波传播的速度接近光速。其中 l 表示信道长度，v 表示电磁波在信道上的传播速度。

  ![1](https://gitee.com/f0rest9999/images/raw/master/20201230205241.png)

#### 计算机网络体系结构

![image-20201230205344866](https://gitee.com/f0rest9999/images/raw/master/20201230205344.png)

- **五层协议**：
  - **应用层**：为==特定应用程序==提供==数据传输==服务，例如 HTTP、DNS 等协议。数据单位为==报文==。
  - **传输层** ：为==进程==提供==通用数据传输==服务。由于应用层协议很多，定义通用的传输层协议就可以支持不断增多的应用层协议。运输层包括两种协议：==传输控制协议 TCP==，提供面向连接、可靠的数据传输服务，数据单位为==报文段==；==用户数据报协议 UDP==，提供无连接、尽最大努力的数据传输服务，数据单位为用户数据报。==TCP 主要提供完整性服务，UDP 主要提供及时性服务==。
  - **网络层** ：为==主机==提供==数据传输==服务。而传输层协议是为主机中的进程提供数据传输服务。网络层把传输层传递下来的报文段或者用户数据报封装成==分组==。
  - **数据链路层** ：网络层针对的还是主机之间的数据传输服务，而==主机之间可以有很多链路==，链路层协议就是为==同一链路的主机==提供数据传输服务。数据链路层把网络层传下来的分组封装成==帧==。
  - **物理层** ：考虑的是==怎样在传输媒体上传输数据比特流==，==而不是指具体的传输媒体==。物理层的作用是==尽可能屏蔽传输媒体和通信手段的差异==，使数据链路层感觉不到这些差异。

- **数据在各层之间传递**：==在向下的过程中，需要添加下层协议所需要的首部或者尾部，而在向上的过程中不断拆开首部和尾部。==

- 路由器只有下面三层协议，因为==路由器==位于==网络核心==中，==不需要为进程或者应用程序提供服务==，因此也就不需要传输层和应用层。

